<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  
  <link rel="shortcut icon" href="../img/favicon.ico">
  <title>2 Trabajando con Data - Python Práctico</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700" />

  <link rel="stylesheet" href="../css/theme.css" />
  <link rel="stylesheet" href="../css/theme_extra.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css" />
  
  <script>
    // Current page data
    var mkdocs_page_name = "2 Trabajando con Data";
    var mkdocs_page_input_path = "2.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../js/jquery-2.1.1.min.js" defer></script>
  <script src="../js/modernizr-2.8.3.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/python.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/shell.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/bash.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> Python Práctico</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="..">Sobre el curso</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../temario/">Temario</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../faq/">Preguntas</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../1/">1 Intro a Python</a>
                    </li>
                </ul>
                <ul class="current">
                    <li class="toctree-l1 current"><a class="reference internal current" href="./">2 Trabajando con Data</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#21-tipos-y-estructuras-de-data">2.1 Tipos y estructuras de data</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#211-tipos-primitivos">2.1.1 Tipos primitivos</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#212-tipo-none">2.1.2 Tipo None</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#213-estructuras-de-data">2.1.3: Estructuras de data</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#214-tuplas">2.1.4: Tuplas</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#215-desempaque-de-tuplas">2.1.5: Desempaque de Tuplas</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#216-tuplas-vs-listas">2.1.6 Tuplas vs Listas</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#217-diccionarios">2.1.7 Diccionarios</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#218-operaciones-comunes">2.1.8 Operaciones comunes</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#219-porque-diccionarios">2.1.9 ¿Porqué diccionarios?</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#2110-ejercicios">2.1.10 Ejercicios</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#ejercicio-21-tuplas">Ejercicio 2.1: Tuplas</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#ejercicio-22-diccionarios-como-estructura-de-datos">Ejercicio 2.2: Diccionarios como estructura de datos</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#ejercicio-23-otras-operaciones-adicionales">Ejercicio 2.3: Otras operaciones adicionales</a>
    </li>
        </ul>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#22-contenedores">2.2 Contenedores</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#221-vision-general">2.2.1: Visión General</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#222-listas-como-un-contenedor">2.2.2: Listas como un Contenedor</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#223-construccion-de-una-lista">2.2.3: Construcción de una lista</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#224-diccionarios-como-contenedores">2.2.4: Diccionarios como contenedores</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#225-construccion-de-un-diccionario">2.2.5: Construcción de un diccionario</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#226-busquedas-de-diccionario">2.2.6: Búsquedas de diccionario</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#227-claves-compuestas">2.2.7: Claves compuestas</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#228-conjuntos-sets">2.2.8: Conjuntos (Sets)</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#229-ejercicios">2.2.9: Ejercicios</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#ejercicio-24-una-lista-de-tuplas">Ejercicio 2.4: Una lista de tuplas</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#ejercicio-25-lista-de-diccionarios">Ejercicio 2.5: Lista de diccionarios</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#ejercicio-26-diccionarios-como-contenedor">Ejercicio 2.6: Diccionarios como contenedor</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#ejercicio-27-descubra-se-puede-jubilar">Ejercicio 2.7: Descubra se puede jubilar</a>
    </li>
        </ul>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#23-salida-formateada">2.3 Salida formateada</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#231-formateo-de-cadena">2.3.1: Formateo de cadena</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#232-codigos-de-formato">2.3.2: Códigos de formato</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#233-formateo-de-diccionarios">2.3.3: Formateo de diccionarios</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#234-el-metodo-format">2.3.4: El método format()</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#235-formateo-al-estilo-c">2.3.5: Formateo al estilo C</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#236-ejercicios">2.3.6: Ejercicios</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#ejercicio-28-como-formatear-numeros">Ejercicio 2.8: Como formatear numeros</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#ejercicio-29-coleccionando-data">Ejercicio 2.9: Coleccionando data</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#ejercicio-210-imprimiendo-una-tabla-formateada">Ejercicio 2.10: Imprimiendo una tabla formateada</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#ejercicio-211-agregando-algunos-encabezados">Ejercicio 2.11: Agregando algunos encabezados</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#ejercicio-212-un-reto">Ejercicio 2.12: Un reto</a>
    </li>
        </ul>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#24-secuencias">2.4 Secuencias</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#241-tipos-de-secuencias">2.4.1: Tipos de secuencias</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#242-cortar">2.4.2: Cortar</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#243-reasignacion-de-cortes">2.4.3: Reasignación de cortes</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#244-secuencia-de-reducciones">2.4.4: Secuencia de reducciones</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#245-iteracion-sobre-una-secuencia">2.4.5: Iteracion sobre una secuencia</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#246-la-declaracion-break">2.4.6: La declaración break</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#247-la-declaracion-continue">2.4.7: La declaración continue</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#248-ciclando-sobre-enteros">2.4.8: Ciclando sobre enteros</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#249-la-funcion-enumerate">2.4.9: La función enumerate()</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#2410-for-y-tuplas">2.4.10: for y tuplas</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#2411-la-funcion-zip">2.4.11: La función zip()</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#2412-ejercicios">2.4.12: Ejercicios</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#ejercicio-213-contar">Ejercicio 2.13: Contar</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#ejercicio-214-mas-operaciones-sobre-secuencias">Ejercicio 2.14: Mas operaciones sobre secuencias</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#ejercicio-215-un-ejemplo-practico-de-enumerate">Ejercicio 2.15: Un ejemplo práctico de enumerate()</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#ejercicio-216-usando-la-funcion-zip">Ejercicio 2.16: Usando la función zip()</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#ejercicio-217-invirtiendo-un-diccionario">Ejercicio 2.17: Invirtiendo un diccionario</a>
    </li>
        </ul>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#25-el-modulo-collections">2.5 El modulo collections</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#251-ejemplo-contando-cosas">2.5.1: Ejemplo: contando cosas</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#252-contadores">2.5.2: Contadores</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#253-ejemplo-asignaciones-uno-muchos">2.5.3: Ejemplo: asignaciones uno-muchos</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#254-ejemplo-un-historial">2.5.4: Ejemplo: un historial</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#255-ejercicios">2.5.5: Ejercicios</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#218-tabulacion-con-contadores">2.18: Tabulación con contadores</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#256-comentario-el-modulo-collections">2.5.6: Comentario: el modulo collections</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#26-list-comprehensions">2.6 List comprehensions</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#261-creando-nuevas-listas">2.6.1: Creando nuevas listas</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#262-filtrar">2.6.2: Filtrar</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#263-casos-de-uso">2.6.3: Casos de uso</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#264-sintaxis-general">2.6.4: Sintaxis general</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#265-digresion-historica">2.6.5: Digresión histórica</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#266-ejercicios">2.6.6: Ejercicios</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#219-list-comprehensions">2.19: List comprehensions</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#220-reducciones-de-secuencia">2.20: Reducciones de secuencia</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#221-consulta-de-datos">2.21: Consulta de datos</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#222-extraccion-de-datos">2.22: Extracción de datos</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#223-extraccion-de-datos-desde-archivos-csv">2.23: Extracción de datos desde archivos CSV</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#comentario">Comentario</a>
    </li>
        </ul>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#27-el-modelo-objeto">2.7 El modelo Objeto</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#271-asignacion">2.7.1: Asignacion</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#272-ejemplo-de-asignacion">2.7.2: Ejemplo de asignacion</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#273-reasignacion-de-valores">2.7.3: Reasignacion de valores</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#274-algunos-peligros">2.7.4: Algunos peligros</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#275-identidad-y-referencias">2.7.5: Identidad y referencias</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#276-copias-superficiales">2.7.6: Copias superficiales</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#229-copias-profundas">2.29: Copias profundas</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#230-nombres-valores-tipos">2.30: Nombres, valores, tipos</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#231-verificacion-de-tipo">2.31: Verificación de tipo</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#232-todo-es-un-objeto">2.32: Todo es un objeto</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#233-ejercicios">2.33: Ejercicios</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#ejercicio-224-data-de-primera-clase">Ejercicio 2.24: Data de primera-clase</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#ejercicio-225-creando-diccionarios">Ejercicio 2.25: Creando diccionarios</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#ejercicio-226-el-horizonte">Ejercicio 2.26: El horizonte</a>
    </li>
        </ul>
    </li>
        </ul>
    </li>
    </ul>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../3/">3 Organización de un Programa</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../4/">4 Clases y Objetos</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../5/">5 Entrañas del Objeto</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../6/">6 Generadores</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../7/">7 Temas avanzados</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../8/">8 Prueba y Depuración</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../9/">9 Paquetes</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../licencia/">Licencia</a>
                    </li>
                </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">Python Práctico</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
    
    <li>2 Trabajando con Data</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="2-trabajando-con-data">2. Trabajando con data</h1>
<p>Conoceremos las estructuras de datos de fundamental importancia en Python: tuples, lists, sets y dictionaries. Presentaremos algunos patrones comunes para el manejo de datos y discutiremos el modelo de objetos en Python.</p>
<h2 id="21-tipos-y-estructuras-de-data">2.1 Tipos y estructuras de data</h2>
<p>Esta sección presenta estructuras de datos en forma de tuplas y diccionarios.</p>
<h3 id="211-tipos-primitivos">2.1.1 Tipos primitivos</h3>
<p>Python tiene algunos tipos primitivos de datos:</p>
<ul>
<li>Enteros</li>
<li>Números de punto flotante</li>
<li>Cadenas (texto)</li>
</ul>
<p>Aprendimos sobre esto en la introducción.</p>
<h3 id="212-tipo-none">2.1.2 Tipo <code>None</code></h3>
<pre><code class="language-python">email_address = None
</code></pre>
<p><code>None</code> se utiliza a menudo como marcador de posición para un valor opcional o faltante. Eso se evalúa como "Falso" en condicionales.</p>
<pre><code class="language-python">if email_address:
    send_email(email_address, msg)
</code></pre>
<h3 id="213-estructuras-de-data">2.1.3: Estructuras de data</h3>
<p>Los programas reales tienen datos más complejos. Por ejemplo, información sobre una participación en acciones:</p>
<pre><code class="language-code">100 acciones de GOOG a $490.10
</code></pre>
<p>Este es un "objeto" con tres partes:</p>
<ul>
<li>Nombre o símbolo de la acción ("GOOG", una cadena)</li>
<li>Número de acciones (100, un número entero)</li>
<li>Precio (490,10 un punto flotante)</li>
</ul>
<h3 id="214-tuplas">2.1.4: Tuplas</h3>
<p>Una tupla es una colección de valores agrupados.</p>
<p>Ejemplo:</p>
<pre><code class="language-python">s = ('GOOG', 100, 490.1)
</code></pre>
<p>A veces el <code>()</code> es omitido.</p>
<pre><code class="language-python">s = 'GOOG', 100, 490.1'
</code></pre>
<p>Casos especiales (0-tupla, 1-tupla).</p>
<pre><code class="language-python">t = ()            # Una tupla vacía
w = ('GOOG', )    # Una tupla de 1-item
</code></pre>
<p>Las tuplas se utilizan a menudo para representar registros o estructuras <em>simples</em>. Normalmente, es un único <em>objeto</em> de varias partes.</p>
<p>Una buena analogía: <em>Una tupla es como una sola fila en una tabla de base de datos.</em></p>
<p>El contenido de la tupla está ordenado (como una matriz).</p>
<pre><code class="language-python">s = ('GOOG', 100, 490.1)
name = s[0]                 # 'GOOG'
shares = s[1]               # 100
price = s[2]                # 490.1
</code></pre>
<p>Sin embargo, el contenido no se puede modificar.</p>
<pre><code class="language-python">&gt;&gt;&gt; s[1] = 75
TypeError: object does not support item assignment
</code></pre>
<p>Sin embargo, puede crear una nueva tupla basada en una tupla actual.</p>
<pre><code class="language-python">s = (s[0], 75, s[2])
</code></pre>
<p>Las tuplas tienen más que ver con empaquetar elementos relacionados en una sola <em>entidad</em>,
que con cualquier otra cosa.</p>
<pre><code class="language-python">s = ('GOOG', 100, 490.1)
</code></pre>
<p>Por tanto, la tupla es fácil de pasar a otras partes de un programa como un solo objeto.</p>
<h3 id="215-desempaque-de-tuplas">2.1.5: Desempaque de Tuplas</h3>
<p>Para usar la tupla en otro lugar, puede desempaquetar sus partes en variables.</p>
<pre><code class="language-python">name, shares, price = s
print('Cost', shares * price)
</code></pre>
<p>The number of variables on the left must match the tuple structure.</p>
<pre><code class="language-python">name, shares = s     # ERROR
Traceback (most recent call last):
...
ValueError: too many values to unpack
</code></pre>
<h3 id="216-tuplas-vs-listas">2.1.6 Tuplas vs Listas</h3>
<p>Tuples look like read-only lists. However, tuples are most often used
for a <em>single item</em> consisting of multiple parts.  Lists are usually a
collection of distinct items, usually all of the same type.</p>
<pre><code class="language-python">record = ('GOOG', 100, 490.1)       # Una tupla que representa un registro en una cartera

symbols = [ 'GOOG', 'AAPL', 'IBM' ]  # Una lista que representa tres símbolos de acciones
</code></pre>
<h3 id="217-diccionarios">2.1.7 Diccionarios</h3>
<p>Un diccionario es la asignación de claves a valores. A veces también se le llama una tabla hash o matriz asociativa. Las claves sirven como índices para acceder a los valores.</p>
<pre><code class="language-python">s = {
    'name': 'GOOG',
    'shares': 100,
    'price': 490.1
}
</code></pre>
<h3 id="218-operaciones-comunes">2.1.8 Operaciones comunes</h3>
<p>To get values from a dictionary use the key names.</p>
<pre><code class="language-python">&gt;&gt;&gt; print(s['name'], s['shares'])
GOOG 100
&gt;&gt;&gt; s['price']
490.10
&gt;&gt;&gt;
</code></pre>
<p>Para agregar o modificar valores, asigne usando los nombres de las claves.</p>
<pre><code class="language-python">&gt;&gt;&gt; s['shares'] = 75
&gt;&gt;&gt; s['date'] = '6/6/2007'
&gt;&gt;&gt;
</code></pre>
<p>Para eliminar un valor, use la instrucción <code>del</code>.</p>
<pre><code class="language-python">&gt;&gt;&gt; del s['date']
&gt;&gt;&gt;
</code></pre>
<h3 id="219-porque-diccionarios">2.1.9 ¿Porqué diccionarios?</h3>
<p>Los diccionarios son útiles cuando hay * muchos * valores diferentes y esos valores
puede ser modificado o manipulado. Los diccionarios hacen que su código sea más legible.</p>
<pre><code class="language-python">s['price']
# vs
s[2]
</code></pre>
<h3 id="2110-ejercicios">2.1.10 Ejercicios</h3>
<p>En los últimos ejercicios, escribió un programa que lee un archivo de datos <code>Data/portfolio.csv</code>.
Usando el módulo <code>csv</code>, es fácil leer el archivo fila por fila.</p>
<pre><code class="language-python">&gt;&gt;&gt; import csv
&gt;&gt;&gt; f = open('Data/portfolio.csv')
&gt;&gt;&gt; rows = csv.reader(f)
&gt;&gt;&gt; next(rows)
['name', 'shares', 'price']
&gt;&gt;&gt; row = next(rows)
&gt;&gt;&gt; row
['AA', '100', '32.20']
&gt;&gt;&gt;
</code></pre>
<p>Aunque leer el archivo es fácil, a menudo querrá hacer más con el datos que leerlos.
Por ejemplo, tal vez desee almacenarlo y comience a realizar algunos cálculos sobre él. Desafortunadamente, una "fila" sin procesar de datos no le da suficiente para trabajar.
Por ejemplo, incluso un el cálculo matemático simple no funciona:</p>
<pre><code class="language-python">&gt;&gt;&gt; row = ['AA', '100', '32.20']
&gt;&gt;&gt; cost = row[1] * row[2]
Traceback (most recent call last):
    File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;
TypeError: can't multiply sequence by non-int of type 'str'
&gt;&gt;&gt;
</code></pre>
<p>Para hacer más, normalmente desea interpretar los datos sin procesar de alguna manera
y convertirlo en un tipo de objeto más útil para que pueda trabajar
con él más tarde. Dos opciones simples son tuplas o diccionarios.</p>
<h4 id="ejercicio-21-tuplas">Ejercicio 2.1: Tuplas</h4>
<p>En el indicador interactivo, cree la siguiente tupla que represente la fila anterior, pero con las columnas numéricas convertidas a los números adecuados:</p>
<pre><code class="language-python">&gt;&gt;&gt; t = (row[0], int(row[1]), float(row[2]))
&gt;&gt;&gt; t
('AA', 100, 32.2)
&gt;&gt;&gt;
</code></pre>
<p>Con esto, ahora puede calcular el costo total multiplicando las acciones y el precio:</p>
<pre><code class="language-python">&gt;&gt;&gt; cost = t[1] * t[2]
&gt;&gt;&gt; cost
3220.0000000000005
&gt;&gt;&gt;
</code></pre>
<p>¿Las matemáticas están rotas en Python? ¿Cuál es el problema con la respuesta de
3220.0000000000005?</p>
<p>Este es un artefacto del hardware de punto flotante en su computadora que solo puede representar decimales con precisión en Base-2, no en Base-10. Incluso para cálculos simples que involucran decimales en base 10, se introducen pequeños errores. Esto es normal, aunque quizás un poco sorprendente si no lo ha visto antes.</p>
<p>Esto sucede en todos los lenguajes de programación que utilizan decimales de punto flotante, pero a menudo se oculta al imprimir. Por ejemplo:</p>
<pre><code class="language-python">&gt;&gt;&gt; print(f'{cost:0.2f}')
3220.00
&gt;&gt;&gt;
</code></pre>
<p>Las tuplas son de solo lectura. Verifique esto intentando cambiar el número de acciones a 75.</p>
<pre><code class="language-python">&gt;&gt;&gt; t[1] = 75
Traceback (most recent call last):
    File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;
TypeError: 'tuple' object does not support item assignment
&gt;&gt;&gt;
</code></pre>
<p>Aunque no puede cambiar el contenido de la tupla, siempre puede crear una tupla completamente nueva que reemplace a la anterior.</p>
<pre><code class="language-python">&gt;&gt;&gt; t = (t[0], 75, t[2])
&gt;&gt;&gt; t
('AA', 75, 32.2)
&gt;&gt;&gt;
</code></pre>
<p>Siempre que reasigne un nombre de variable existente como este, el valor anterior se descarta. Aunque la asignación anterior puede parecer que está modificando la tupla, en realidad está creando una nueva tupla y desechando la anterior.</p>
<p>Las tuplas se utilizan a menudo para empaquetar y descomprimir valores en variables. Intente lo siguiente:</p>
<pre><code class="language-python">&gt;&gt;&gt; name, shares, price = t
&gt;&gt;&gt; name
'AA'
&gt;&gt;&gt; shares
75
&gt;&gt;&gt; price
32.2
&gt;&gt;&gt;
</code></pre>
<p>Tome las variables anteriores y vuelva a empaquetarlas en una tupla</p>
<pre><code class="language-python">&gt;&gt;&gt; t = (name, 2*shares, price)
&gt;&gt;&gt; t
('AA', 150, 32.2)
&gt;&gt;&gt;
</code></pre>
<h4 id="ejercicio-22-diccionarios-como-estructura-de-datos">Ejercicio 2.2: Diccionarios como estructura de datos</h4>
<p>Una alternativa a una tupla es crear un diccionario.</p>
<pre><code class="language-python">&gt;&gt;&gt; d = {
        'name' : row[0],
        'shares' : int(row[1]),
        'price'  : float(row[2])
    }
&gt;&gt;&gt; d
{'name': 'AA', 'shares': 100, 'price': 32.2 }
&gt;&gt;&gt;
</code></pre>
<p>Calcule el costo total de esta participación:</p>
<pre><code class="language-python">&gt;&gt;&gt; cost = d['shares'] * d['price']
&gt;&gt;&gt; cost
3220.0000000000005
&gt;&gt;&gt;
</code></pre>
<p>Compare este ejemplo con el mismo cálculo que involucra tuplas anterior. Cambie el número de acciones a 75.</p>
<pre><code class="language-python">&gt;&gt;&gt; d['shares'] = 75
&gt;&gt;&gt; d
{'name': 'AA', 'shares': 75, 'price': 32.2 }
&gt;&gt;&gt;
</code></pre>
<p>A diferencia de las tuplas, los diccionarios se pueden modificar libremente. Agrega algunos atributos:</p>
<pre><code class="language-python">&gt;&gt;&gt; d['date'] = (6, 11, 2007)
&gt;&gt;&gt; d['account'] = 12345
&gt;&gt;&gt; d
{'name': 'AA', 'shares': 75, 'price':32.2, 'date': (6, 11, 2007), 'account': 12345}
&gt;&gt;&gt;
</code></pre>
<h4 id="ejercicio-23-otras-operaciones-adicionales">Ejercicio 2.3: Otras operaciones adicionales</h4>
<p>Si convierte un diccionario en una lista, obtendrá todas sus claves:</p>
<pre><code class="language-python">&gt;&gt;&gt; list(d)
['name', 'shares', 'price', 'date', 'account']
&gt;&gt;&gt;
</code></pre>
<p>De manera similar, si usa la fordeclaración para iterar en un diccionario, obtendrá las claves:</p>
<pre><code class="language-python">&gt;&gt;&gt; for k in d:
        print('k =', k)

k = name
k = shares
k = price
k = date
k = account
&gt;&gt;&gt;
</code></pre>
<p>Pruebe esta variante que realiza una búsqueda al mismo tiempo:</p>
<pre><code class="language-python">&gt;&gt;&gt; for k in d:
        print(k, '=', d[k])

name = AA
shares = 75
price = 32.2
date = (6, 11, 2007)
account = 12345
&gt;&gt;&gt;
</code></pre>
<p>También puede obtener todas las claves utilizando el método <code>keys()</code>:</p>
<pre><code class="language-python">&gt;&gt;&gt; keys = d.keys()
&gt;&gt;&gt; keys
dict_keys(['name', 'shares', 'price', 'date', 'account'])
&gt;&gt;&gt;
</code></pre>
<p>keys()es un poco inusual porque devuelve un dict_keysobjeto especial .</p>
<p>Se trata de una superposición del diccionario original que siempre le proporciona las claves actuales, incluso si el diccionario cambia. Por ejemplo, intente esto:</p>
<pre><code class="language-python">&gt;&gt;&gt; del d['account']
&gt;&gt;&gt; keys
dict_keys(['name', 'shares', 'price', 'date'])
&gt;&gt;&gt;
</code></pre>
<p>Observe cuidadosamente que 'account'desapareció keysaunque no volvió a llamar d.keys().</p>
<p>Una forma más elegante de trabajar con claves y valores juntos es utilizar el items()método. Esto te da (key, value)tuplas:</p>
<pre><code class="language-python">&gt;&gt;&gt; items = d.items()
&gt;&gt;&gt; items
dict_items([('name', 'AA'), ('shares', 75), ('price', 32.2), ('date', (6, 11, 2007))])
&gt;&gt;&gt; for k, v in d.items():
        print(k, '=', v)

name = AA
shares = 75
price = 32.2
date = (6, 11, 2007)
&gt;&gt;&gt;
</code></pre>
<p>Si tiene tuplas como items, puede crear un diccionario usando la dict()función. Intentalo:</p>
<pre><code class="language-python">&gt;&gt;&gt; items
dict_items([('name', 'AA'), ('shares', 75), ('price', 32.2), ('date', (6, 11, 2007))])
&gt;&gt;&gt; d = dict(items)
&gt;&gt;&gt; d
{'name': 'AA', 'shares': 75, 'price':32.2, 'date': (6, 11, 2007)}
&gt;&gt;&gt;
</code></pre>
<h2 id="22-contenedores">2.2 Contenedores</h2>
<h3 id="221-vision-general">2.2.1: Visión General</h3>
<p>Los programas a menudo tienen que trabajar con muchos objetos.</p>
<ul>
<li>Una cartera de acciones</li>
<li>Una tabla de precios de acciones</li>
</ul>
<p>Hay tres opciones principales para usar.</p>
<ul>
<li>Listas. Datos ordenados.</li>
<li>Diccionarios. Datos desordenados.</li>
<li>Conjuntos. Colección desordenada de artículos únicos.*</li>
</ul>
<h3 id="222-listas-como-un-contenedor">2.2.2: Listas como un Contenedor</h3>
<p>Utilice una lista cuando sea importante el orden de los datos. Recuerde que las listas pueden contener cualquier tipo de objeto. Por ejemplo, una lista de tuplas.</p>
<pre><code class="language-python">portfolio = [
    ('GOOG', 100, 490.1),
    ('IBM', 50, 91.3),
    ('CAT', 150, 83.44)
]

portfolio[0]            # ('GOOG', 100, 490.1)
portfolio[2]            # ('CAT', 150, 83.44)
</code></pre>
<h3 id="223-construccion-de-una-lista">2.2.3: Construcción de una lista</h3>
<p>Construyendo una lista desde cero.</p>
<pre><code class="language-python">records = []  # Initial empty list

# Use .append() to add more items
records.append(('GOOG', 100, 490.10))
records.append(('IBM', 50, 91.3))
...
</code></pre>
<p>Un ejemplo al leer registros de un archivo.</p>
<pre><code class="language-python">records = []  # Lista vacía de inicio

with open('Data/portfolio.csv', 'rt') as f:
    next(f) # Nos saltamos el encabezado
    for line in f:
        row = line.split(',')
        records.append((row[0], int(row[1]), float(row[2])))
</code></pre>
<h3 id="224-diccionarios-como-contenedores">2.2.4: Diccionarios como contenedores</h3>
<p>Los diccionarios son útiles si desea búsquedas aleatorias rápidas (por nombre de clave). Por ejemplo, un diccionario de precios de acciones:</p>
<pre><code class="language-python">prices = {
   'GOOG': 513.25,
   'CAT': 87.22,
   'IBM': 93.37,
   'MSFT': 44.12
}
</code></pre>
<p>Aquí hay algunas búsquedas simples:</p>
<pre><code class="language-python">&gt;&gt;&gt; prices['IBM']
93.37
&gt;&gt;&gt; prices['GOOG']
513.25
&gt;&gt;&gt;
</code></pre>
<h3 id="225-construccion-de-un-diccionario">2.2.5: Construcción de un diccionario</h3>
<p>Ejemplo de construcción de un dictado desde cero.</p>
<pre><code class="language-python">prices = {} # Initial empty dict
# Insert new items prices['GOOG'] = 513.25
prices['CAT'] = 87.22
prices['IBM'] = 93.37
</code></pre>
<p>Un ejemplo que completa el dict a partir del contenido de un archivo.</p>
<pre><code class="language-python">prices = {} # Initial empty dict
with open('Data/prices.csv', 'rt') as f:
    for line in f:
        row = line.split(',')
        prices[row[0]] = float(row[1])
</code></pre>
<p>Nota: Si prueba esto en el Data/prices.csvarchivo, encontrará que casi funciona; hay una línea en blanco al final que hace que se bloquee. Necesitará encontrar alguna forma de modificar el código para tener en cuenta eso (vea el ejercicio 2.6).</p>
<h3 id="226-busquedas-de-diccionario">2.2.6: Búsquedas de diccionario</h3>
<p>Puede probar la existencia de una clave.</p>
<pre><code class="language-python">if key in d:
    # YES else:
    # NO
</code></pre>
<p>Puede buscar un valor que podría no existir y proporcionar un valor predeterminado en caso de que no exista.</p>
<pre><code class="language-python">name = d.get(key, default)
</code></pre>
<p>Un ejemplo:</p>
<pre><code class="language-python">&gt;&gt;&gt; prices.get('IBM', 0.0)
93.37
&gt;&gt;&gt; prices.get('SCOX', 0.0)
0.0
&gt;&gt;&gt;
</code></pre>
<h3 id="227-claves-compuestas">2.2.7: Claves compuestas</h3>
<p>Casi cualquier tipo de valor se puede utilizar como clave de diccionario en Python. Una clave de diccionario debe ser de un tipo que sea inmutable. Por ejemplo, tuplas:</p>
<pre><code class="language-python">holidays = {
  (1, 1) : 'New Years',
  (3, 14) : 'Pi day',
  (9, 13) : &quot;Programmer's day&quot;,
}
</code></pre>
<p>Luego para acceder:</p>
<pre><code class="language-python">&gt;&gt;&gt; holidays[3, 14]
'Pi day'
&gt;&gt;&gt;
</code></pre>
<p>Ni una lista, un conjunto ni otro diccionario pueden servir como clave de diccionario, porque las listas y los diccionarios son mutables.</p>
<h3 id="228-conjuntos-sets">2.2.8: Conjuntos (Sets)</h3>
<p>Los conjuntos son una colección de elementos únicos desordenados.</p>
<pre><code class="language-python">tech_stocks = { 'IBM','AAPL','MSFT' }
# alternativamente: tech_stocks = set(['IBM', 'AAPL', 'MSFT'])
</code></pre>
<p>Los conjuntos son útiles para las pruebas de pertenencia.</p>
<pre><code class="language-python">&gt;&gt;&gt; tech_stocks
set(['AAPL', 'IBM', 'MSFT'])
&gt;&gt;&gt; 'IBM' in tech_stocks
True
&gt;&gt;&gt; 'FB' in tech_stocks
False
&gt;&gt;&gt;
</code></pre>
<p>Los conjuntos también son útiles para la eliminación de duplicados.</p>
<pre><code class="language-python">names = ['IBM', 'AAPL', 'GOOG', 'IBM', 'GOOG', 'YHOO']

unique = set(names)
# unique = set(['IBM', 'AAPL','GOOG','YHOO'])
</code></pre>
<p>Operaciones de conjuntos adicionales:</p>
<pre><code class="language-python">names.add('CAT')        # Add an item
names.remove('YHOO')    # Remove an item

s1 | s2                 # Set union
s1 &amp; s2                 # Set intersection
s1 - s2                 # Set difference
</code></pre>
<h3 id="229-ejercicios">2.2.9: Ejercicios</h3>
<p>En estos ejercicios, comenzará a crear uno de los programas principales que se utilizarán durante el resto de este curso. Haga su trabajo en el archivo <code>Work/report.py</code>.</p>
<h4 id="ejercicio-24-una-lista-de-tuplas">Ejercicio 2.4: Una lista de tuplas</h4>
<p>El archivo Data/portfolio.csvcontiene una lista de acciones en una cartera. En el ejercicio 1.30 , escribió una función portfolio_cost(filename)que leyó este archivo y realizó un cálculo simple.</p>
<p>Tu código debería haberse visto así:</p>
<pre><code class="language-python"># pcost.py
import csv

def portfolio_cost(filename):
    '''Computes the total cost (shares*price) of a portfolio file'''
    total_cost = 0.0

    with open(filename, 'rt') as f:
        rows = csv.reader(f)
        headers = next(rows)
        for row in rows:
            nshares = int(row[1])
            price = float(row[2])
            total_cost += nshares * price
    return total_cost
</code></pre>
<p>Usando este código como una guía aproximada, cree un nuevo archivo report.py. En ese archivo, defina una función read_portfolio(filename)que abra un archivo de cartera determinado y lo lea en una lista de tuplas. Para hacer esto, va a realizar algunas modificaciones menores al código anterior.</p>
<p>Primero, en lugar de definir total_cost = 0, creará una variable que inicialmente se establece en una lista vacía. Por ejemplo:</p>
<pre><code class="language-python">portfolio = []
</code></pre>
<p>A continuación, en lugar de sumar el costo total, convertirá cada fila en una tupla exactamente como lo hizo en el último ejercicio y la agregará a esta lista. Por ejemplo:</p>
<pre><code class="language-python">for row in rows:
    holding = (row[0], int(row[1]), float(row[2]))
    portfolio.append(holding)
</code></pre>
<p>Finalmente, devolverá la portfoliolista resultante .</p>
<p>Experimente con su función de forma interactiva (solo un recordatorio de que para hacer esto, primero debe ejecutar el report.pyprograma en el intérprete):</p>
<p>Sugerencia: Haga uso de <code>-i</code> al ejecutar el archivo en la terminal, e.g. <code>$ python -i archivo.py</code></p>
<pre><code class="language-python">&gt;&gt;&gt; portfolio = read_portfolio('Data/portfolio.csv')
&gt;&gt;&gt; portfolio
[('AA', 100, 32.2), ('IBM', 50, 91.1), ('CAT', 150, 83.44), ('MSFT', 200, 51.23),
    ('GE', 95, 40.37), ('MSFT', 50, 65.1), ('IBM', 100, 70.44)]
&gt;&gt;&gt;
&gt;&gt;&gt; portfolio[0]
('AA', 100, 32.2)
&gt;&gt;&gt; portfolio[1]
('IBM', 50, 91.1)
&gt;&gt;&gt; portfolio[1][1]
50
&gt;&gt;&gt; total = 0.0
&gt;&gt;&gt; for s in portfolio:
        total += s[1] * s[2]

&gt;&gt;&gt; print(total)
44671.15
&gt;&gt;&gt;
</code></pre>
<p>Esta lista de tuplas que ha creado es muy similar a una matriz 2-D. Por ejemplo, puede acceder a una columna y una fila específicas mediante una búsqueda como portfolio[row][column]dónde rowy columnson números enteros.</p>
<p>Dicho esto, también puede reescribir el último ciclo for usando una declaración como esta:</p>
<pre><code class="language-python">&gt;&gt;&gt; total = 0.0
&gt;&gt;&gt; for name, shares, price in portfolio:
            total += shares*price

&gt;&gt;&gt; print(total)
44671.15
&gt;&gt;&gt;
</code></pre>
<h4 id="ejercicio-25-lista-de-diccionarios">Ejercicio 2.5: Lista de diccionarios</h4>
<p>Tome la función que escribió en el ejercicio 2.4 y modifíquela para representar cada acción de la cartera con un diccionario en lugar de una tupla. En este diccionario, use los nombres de campo de "nombre", "acciones" y "precio" para representar las diferentes columnas en el archivo de entrada.</p>
<p>Experimente con esta nueva función de la misma manera que lo hizo en el ejercicio 2.4.</p>
<pre><code class="language-python">&gt;&gt;&gt; portfolio = read_portfolio('Data/portfolio.csv')
&gt;&gt;&gt; portfolio
[{'name': 'AA', 'shares': 100, 'price': 32.2}, {'name': 'IBM', 'shares': 50, 'price': 91.1},
    {'name': 'CAT', 'shares': 150, 'price': 83.44}, {'name': 'MSFT', 'shares': 200, 'price': 51.23},
    {'name': 'GE', 'shares': 95, 'price': 40.37}, {'name': 'MSFT', 'shares': 50, 'price': 65.1},
    {'name': 'IBM', 'shares': 100, 'price': 70.44}]
&gt;&gt;&gt; portfolio[0]
{'name': 'AA', 'shares': 100, 'price': 32.2}
&gt;&gt;&gt; portfolio[1]
{'name': 'IBM', 'shares': 50, 'price': 91.1}
&gt;&gt;&gt; portfolio[1]['shares']
50
&gt;&gt;&gt; total = 0.0
&gt;&gt;&gt; for s in portfolio:
        total += s['shares']*s['price']

&gt;&gt;&gt; print(total)
44671.15
&gt;&gt;&gt;
</code></pre>
<p>Aquí, notará que se accede a los diferentes campos para cada entrada mediante nombres de clave en lugar de números de columna numéricos. Esto se prefiere a menudo porque el código resultante es más fácil de leer más tarde.</p>
<p>Ver diccionarios y listas de gran tamaño puede resultar complicado. Para limpiar la salida para la depuración, considere usar la función <code>pprint</code>.</p>
<pre><code class="language-python">&gt;&gt;&gt; from pprint import pprint
&gt;&gt;&gt; pprint(portfolio)
[{'name': 'AA', 'price': 32.2, 'shares': 100},
    {'name': 'IBM', 'price': 91.1, 'shares': 50},
    {'name': 'CAT', 'price': 83.44, 'shares': 150},
    {'name': 'MSFT', 'price': 51.23, 'shares': 200},
    {'name': 'GE', 'price': 40.37, 'shares': 95},
    {'name': 'MSFT', 'price': 65.1, 'shares': 50},
    {'name': 'IBM', 'price': 70.44, 'shares': 100}]
&gt;&gt;&gt;
</code></pre>
<h4 id="ejercicio-26-diccionarios-como-contenedor">Ejercicio 2.6: Diccionarios como contenedor</h4>
<p>Un diccionario es una forma útil de realizar un seguimiento de los elementos en los que desea buscar elementos utilizando un índice que no sea un número entero. En el shell de Python, intente jugar con un diccionario:</p>
<pre><code class="language-python">&gt;&gt;&gt; prices = { }
&gt;&gt;&gt; prices['IBM'] = 92.45
&gt;&gt;&gt; prices['MSFT'] = 45.12
&gt;&gt;&gt; prices
... look at the result ...
&gt;&gt;&gt; prices['IBM']
92.45
&gt;&gt;&gt; prices['AAPL']
... look at the result ...
&gt;&gt;&gt; 'AAPL' in prices
False
&gt;&gt;&gt;
</code></pre>
<p>El archivo Data/prices.csvcontiene una serie de líneas con precios de acciones. El archivo se parece a esto:</p>
<pre><code class="language-python">&quot;AA&quot;,9.22
&quot;AXP&quot;,24.85
&quot;BA&quot;,44.85
&quot;BAC&quot;,11.27
&quot;C&quot;,3.72
...
</code></pre>
<p>Escriba una función read_prices(filename)que lea un conjunto de precios como este en un diccionario donde las claves del diccionario son los nombres de las acciones y los valores en el diccionario son los precios de las acciones.</p>
<p>Para hacer esto, comience con un diccionario vacío y comience a insertar valores en él tal como lo hizo anteriormente. Sin embargo, ahora está leyendo los valores de un archivo.</p>
<p>Usaremos esta estructura de datos para buscar rápidamente el precio de un nombre de acción determinado.</p>
<p>Algunos pequeños consejos que necesitará para esta parte. Primero, asegúrese de usar el csvmódulo tal como lo hizo antes, no es necesario reinventar la rueda aquí.</p>
<pre><code class="language-python">&gt;&gt;&gt; import csv
&gt;&gt;&gt; f = open('Data/prices.csv', 'r')
&gt;&gt;&gt; rows = csv.reader(f)
&gt;&gt;&gt; for row in rows:
        print(row)

['AA', '9.22']
['AXP', '24.85']
...
[]
&gt;&gt;&gt;
</code></pre>
<p>La otra pequeña complicación es que el Data/prices.csvarchivo puede tener algunas líneas en blanco. Observe cómo la última fila de datos de arriba es una lista vacía, lo que significa que no había datos presentes en esa línea.</p>
<p>Existe la posibilidad de que esto provoque la muerte de su programa con una excepción. Utilice las declaraciones tryy exceptpara detectar esto según corresponda. Pensamiento: ¿sería mejor protegerse contra datos incorrectos con una ifdeclaración -en su lugar?</p>
<p>Una vez que haya escrito su función read_prices(), pruébela de forma interactiva para asegurarse de que funcione:</p>
<pre><code class="language-python">&gt;&gt;&gt; prices = read_prices('Data/prices.csv')
&gt;&gt;&gt; prices['IBM']
106.28
&gt;&gt;&gt; prices['MSFT']
20.89
&gt;&gt;&gt;
</code></pre>
<p>La otra pequeña complicación es que el archivo <code>Data/prices.csv</code> puede tener algunas líneas en blanco. Observe cómo la última fila de datos de arriba es una lista vacía, lo que significa que no había datos presentes en esa línea.</p>
<p>Existe la posibilidad de que esto provoque la muerte de su programa con una excepción. Utilice las declaraciones tryy exceptpara detectar esto según corresponda. Pensamiento: ¿sería mejor protegerse contra datos incorrectos con una ifdeclaración -en su lugar?</p>
<p>Una vez que haya escrito su función <code>read_prices()</code>, pruébela de forma interactiva para asegurarse de que funcione:</p>
<pre><code class="language-python">&gt;&gt;&gt; prices = read_prices('Data/prices.csv')
&gt;&gt;&gt; prices['IBM']
106.28
&gt;&gt;&gt; prices['MSFT']
20.89
&gt;&gt;&gt;
</code></pre>
<h4 id="ejercicio-27-descubra-se-puede-jubilar">Ejercicio 2.7: Descubra se puede jubilar</h4>
<p>Complete este trabajo agregando algunas declaraciones adicionales a su programa <code>report.py</code> que calculen ganancias / pérdidas. Estas declaraciones deben tomar la lista de acciones del ejercicio 2.5 y el diccionario de precios del ejercicio 2.6 y calcular el valor actual de la cartera junto con la ganancia / pérdida.</p>
<h2 id="23-salida-formateada">2.3 Salida formateada</h2>
<p>Esta sección es una pequeña digresión, pero cuando trabaja con datos, a menudo desea producir resultados estructurados (tablas, etc.). Por ejemplo:</p>
<pre><code>      Name      Shares        Price
----------  ----------  -----------
        AA         100        32.20
       IBM          50        91.10
       CAT         150        83.44
      MSFT         200        51.23
        GE          95        40.37
      MSFT          50        65.10
       IBM         100        70.44
</code></pre>
<h3 id="231-formateo-de-cadena">2.3.1: Formateo de cadena</h3>
<p>Una forma de formatear cadenas en Python 3.6+ es con f-strings.</p>
<pre><code class="language-python">&gt;&gt;&gt; name = 'IBM'
&gt;&gt;&gt; shares = 100
&gt;&gt;&gt; price = 91.1
&gt;&gt;&gt; f'{name:&gt;10s} {shares:&gt;10d} {price:&gt;10.2f}'
' IBM 100 91.10'
&gt;&gt;&gt;
</code></pre>
<p>La pieza <code>{expression:format}</code> se reemplaza.</p>
<p>Se usa comúnmente con print.</p>
<pre><code class="language-python">print(f'{name:&gt;10s} {shares:&gt;10d} {price:&gt;10.2f}')
</code></pre>
<h3 id="232-codigos-de-formato">2.3.2: Códigos de formato</h3>
<p>Códigos de formato (después de que el :interior de la {}) son similares a C printf(). Los códigos comunes incluyen:</p>
<pre><code>d       Decimal integer
b       Binary integer
x       Hexadecimal integer
f       Float as [-]m.dddddd
e       Float as [-]m.dddddde+-xx
g       Float, but selective use of E notation
s       String
c       Character (from integer)
</code></pre>
<p>Los modificadores comunes ajustan el ancho del campo y la precisión decimal. Esta es una lista parcial:</p>
<pre><code>:&gt;10d   Integer right aligned in 10-character field
:&lt;10d   Integer left aligned in 10-character field
:^10d   Integer centered in 10-character field
:0.2f   Float with 2 digit precision
</code></pre>
<h3 id="233-formateo-de-diccionarios">2.3.3: Formateo de diccionarios</h3>
<p>Puede utilizar el format_map()método para aplicar formato de cadena a un diccionario de valores:</p>
<pre><code>&gt;&gt;&gt; s = {
    'name': 'IBM',
    'shares': 100,
    'price': 91.1
}
&gt;&gt;&gt; '{name:&gt;10s} {shares:10d} {price:10.2f}'.format_map(s)
' IBM 100 91.10'
&gt;&gt;&gt;
</code></pre>
<p>Utiliza los mismos códigos que f-stringspero toma los valores del diccionario suministrado.</p>
<h3 id="234-el-metodo-format">2.3.4: El método format()</h3>
<p>Existe un método format()que puede aplicar formato a argumentos o argumentos de palabras clave.</p>
<pre><code class="language-python">&gt;&gt;&gt; '{name:&gt;10s} {shares:10d} {price:10.2f}'.format(name='IBM', shares=100, price=91.1)
' IBM 100 91.10'
&gt;&gt;&gt; '{:10s} {:10d} {:10.2f}'.format('IBM', 100, 91.1)
' IBM 100 91.10'
&gt;&gt;&gt;
</code></pre>
<p>Francamente, format()es un poco prolijo. Prefiero las cuerdas f.</p>
<h3 id="235-formateo-al-estilo-c">2.3.5: Formateo al estilo C</h3>
<p>También puede utilizar el operador de formato <code>%</code>.</p>
<pre><code class="language-python">&gt;&gt;&gt; 'The value is %d' % 3
'The value is 3'
&gt;&gt;&gt; '%5d %-5d %10d' % (3,4,5)
' 3 4 5'
&gt;&gt;&gt; '%0.2f' % (3.1415926,)
'3.14'
</code></pre>
<p>Esto requiere un solo elemento o una tupla a la derecha. Códigos de formato son el modelo de la C <code>printf()</code> también.</p>
<p>Nota: Este es el único formato disponible en cadenas de bytes.</p>
<pre><code class="language-python">&gt;&gt;&gt; b'%s has %n messages' % (b'Dave', 37)
b'Dave has 37 messages'
&gt;&gt;&gt;
</code></pre>
<h3 id="236-ejercicios">2.3.6: Ejercicios</h3>
<h4 id="ejercicio-28-como-formatear-numeros">Ejercicio 2.8: Como formatear numeros</h4>
<p>Un problema común al imprimir números es especificar el número de decimales. Una forma de solucionar este problema es usar f-strings. Prueba estos ejemplos:</p>
<pre><code class="language-python">&gt;&gt;&gt; value = 42863.1
&gt;&gt;&gt; print(value)
42863.1
&gt;&gt;&gt; print(f'{value:0.4f}')
42863.1000
&gt;&gt;&gt; print(f'{value:&gt;16.2f}')
        42863.10
&gt;&gt;&gt; print(f'{value:&lt;16.2f}')
42863.10
&gt;&gt;&gt; print(f'{value:*&gt;16,.2f}')
*******42,863.10
&gt;&gt;&gt;
</code></pre>
<p>La documentación completa sobre los códigos de formato utilizados para las cadenas f se puede encontrar aquí . El formateo también se realiza a veces utilizando el operador <code>%</code> de cadenas.</p>
<pre><code class="language-python">&gt;&gt;&gt; print('%0.4f' % value)
42863.1000
&gt;&gt;&gt; print('%16.2f' % value)
        42863.10
&gt;&gt;&gt;
</code></pre>
<p>La documentación sobre varios códigos utilizados con %se puede encontrar aquí.</p>
<p>Aunque se usa comúnmente con print, el formato de cadena no está ligado a la impresión. Si desea guardar una cadena formateada. Simplemente asígnelo a una variable.</p>
<pre><code class="language-python">&gt;&gt;&gt; f = '%0.4f' % value
&gt;&gt;&gt; f
'42863.1000'
&gt;&gt;&gt;
</code></pre>
<h4 id="ejercicio-29-coleccionando-data">Ejercicio 2.9: Coleccionando data</h4>
<p>En el ejercicio 2.7, escribió un programa llamado report.pyque calculó la ganancia / pérdida de una cartera de acciones. En este ejercicio, comenzará a modificarlo para producir una tabla como esta:</p>
<pre><code class="language-python">      Name     Shares      Price     Change
---------- ---------- ---------- ----------
        AA        100       9.22     -22.98
       IBM         50     106.28      15.18
       CAT        150      35.46     -47.98
      MSFT        200      20.89     -30.34
        GE         95      13.48     -26.89
      MSFT         50      20.89     -44.21
       IBM        100     106.28      35.84
</code></pre>
<p>En este informe, "Precio" es el precio actual de la acción de la acción y "Cambio" es el cambio en el precio de la acción desde el precio de compra inicial.</p>
<p>Para generar el informe anterior, primero querrá recopilar todos los datos que se muestran en la tabla. Escriba una función <code>make_report()</code> que tome una lista de existencias y un diccionario de precios como entrada y devuelva una lista de tuplas que contenga las filas de la tabla anterior.</p>
<p>Agregue esta función a su report.pyarchivo. Así es como debería funcionar si lo prueba de forma interactiva:</p>
<pre><code class="language-python">&gt;&gt;&gt; portfolio = read_portfolio('Data/portfolio.csv')
&gt;&gt;&gt; prices = read_prices('Data/prices.csv')
&gt;&gt;&gt; report = make_report(portfolio, prices)
&gt;&gt;&gt; for r in report:
        print(r)

('AA', 100, 9.22, -22.980000000000004)
('IBM', 50, 106.28, 15.180000000000007)
('CAT', 150, 35.46, -47.98)
('MSFT', 200, 20.89, -30.339999999999996)
('GE', 95, 13.48, -26.889999999999997)
...
&gt;&gt;&gt;
</code></pre>
<h4 id="ejercicio-210-imprimiendo-una-tabla-formateada">Ejercicio 2.10: Imprimiendo una tabla formateada</h4>
<p>Rehaga el bucle for del ejercicio 2.9, pero cambie la instrucción print para formatear las tuplas.</p>
<pre><code class="language-python">&gt;&gt;&gt; for r in report:
        print('%10s %10d %10.2f %10.2f' % r)

          AA        100       9.22     -22.98
         IBM         50     106.28      15.18
         CAT        150      35.46     -47.98
        MSFT        200      20.89     -30.34
...
&gt;&gt;&gt;
</code></pre>
<p>También puede expandir los valores y usar f-strings. Por ejemplo:</p>
<pre><code class="language-python">&gt;&gt;&gt; for name, shares, price, change in report:
        print(f'{name:&gt;10s} {shares:&gt;10d} {price:&gt;10.2f} {change:&gt;10.2f}')

          AA        100       9.22     -22.98
         IBM         50     106.28      15.18
         CAT        150      35.46     -47.98
        MSFT        200      20.89     -30.34
...
&gt;&gt;&gt;
</code></pre>
<p>Tome las declaraciones anteriores y agréguelas a su report.pyprograma. Haga que su programa tome la salida de la función <code>make_report()</code> e imprima una tabla bien formateada como se muestra.</p>
<h4 id="ejercicio-211-agregando-algunos-encabezados">Ejercicio 2.11: Agregando algunos encabezados</h4>
<p>Suponga que tiene una tupla de nombres de encabezado como este:</p>
<pre><code class="language-python">headers = ('Name', 'Shares', 'Price', 'Change')
</code></pre>
<p>Agregue código a su programa que toma la tupla de encabezados anterior y crea una cadena donde cada nombre de encabezado está alineado a la derecha en un campo de 10 caracteres de ancho y cada campo está separado por un solo espacio.</p>
<pre><code class="language-python">' Name Shares Price Change'
</code></pre>
<p>Escriba código que tome los encabezados y cree la cadena de separación entre los encabezados y los datos que siguen. Esta cadena es solo un grupo de caracteres "-" debajo de cada nombre de campo. Por ejemplo:</p>
<pre><code class="language-python">'---------- ---------- ---------- -----------'
</code></pre>
<p>Cuando haya terminado, su programa debería producir la tabla que se muestra en la parte superior de este ejercicio.</p>
<pre><code>      Name     Shares      Price     Change
---------- ---------- ---------- ----------
        AA        100       9.22     -22.98
       IBM         50     106.28      15.18
       CAT        150      35.46     -47.98
      MSFT        200      20.89     -30.34
        GE         95      13.48     -26.89
      MSFT         50      20.89     -44.21
       IBM        100     106.28      35.84
</code></pre>
<h4 id="ejercicio-212-un-reto">Ejercicio 2.12: Un reto</h4>
<p>¿Cómo modificaría su código para que el precio incluya el símbolo de moneda ($) y la salida se vea así:</p>
<pre><code>      Name     Shares      Price     Change
---------- ---------- ---------- ----------
        AA        100      $9.22     -22.98
       IBM         50    $106.28      15.18
       CAT        150     $35.46     -47.98
      MSFT        200     $20.89     -30.34
        GE         95     $13.48     -26.89
      MSFT         50     $20.89     -44.21
       IBM        100    $106.28      35.84
</code></pre>
<hr />
<h2 id="24-secuencias">2.4 Secuencias</h2>
<h3 id="241-tipos-de-secuencias">2.4.1: Tipos de secuencias</h3>
<p>Python tiene tres tipos de datos de <em>secuencia</em> .</p>
<ul>
<li>Cuerda: <code>'Hello'</code>. Una cadena es una secuencia de caracteres.</li>
<li>Lista: <code>[1, 4, 5]</code>.</li>
<li>Tupla: <code>('GOOG', 100, 490.1)</code>.</li>
</ul>
<p>Todas las secuencias están ordenadas, indexadas por números enteros y tienen una longitud.</p>
<pre><code class="language-python">a = 'Hello'               # String
b = [1, 4, 5]             # List
c = ('GOOG', 100, 490.1)  # Tuple

# Indexed order
a[0]                      # 'H'
b[-1]                     # 5
c[1]                      # 100

# Length of sequence
len(a)                    # 5
len(b)                    # 3
len(c)                    # 3
</code></pre>
<p>Las secuencias pueden ser replicados: <code>s * n</code>.</p>
<pre><code class="language-python">&gt;&gt;&gt; a = 'Hello'
&gt;&gt;&gt; a * 3
'HelloHelloHello'
&gt;&gt;&gt; b = [1, 2, 3]
&gt;&gt;&gt; b * 2
[1, 2, 3, 1, 2, 3]
&gt;&gt;&gt;
</code></pre>
<p>Secuencias del mismo tipo pueden ser concatenados: <code>s + t</code>.</p>
<pre><code class="language-python">&gt;&gt;&gt; a = (1, 2, 3)
&gt;&gt;&gt; b = (4, 5)
&gt;&gt;&gt; a + b
(1, 2, 3, 4, 5)
&gt;&gt;&gt;
&gt;&gt;&gt; c = [1, 5]
&gt;&gt;&gt; a + c
Traceback (most recent call last):
  File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;
TypeError: can only concatenate tuple (not &quot;list&quot;) to tuple
</code></pre>
<h3 id="242-cortar">2.4.2: Cortar</h3>
<p>Cortar significa tomar una subsecuencia de una secuencia. La sintaxis es <code>s[start:end]</code>. Donde <code>start</code>y <code>end</code>son los índices de la subsecuencia que desea.</p>
<pre><code class="language-python">a = [0,1,2,3,4,5,6,7,8]

a[2:5]    # [2,3,4]
a[-5:]    # [4,5,6,7,8]
a[:3]     # [0,1,2]
</code></pre>
<ul>
<li>Índices <code>start</code>y <code>end</code>deben ser números enteros.</li>
<li>Las rebanadas <em>no</em> incluyen el valor final. Es como un intervalo medio abierto de matemáticas.</li>
<li>Si se omiten los índices, por defecto van al principio o al final de la lista.</li>
</ul>
<h3 id="243-reasignacion-de-cortes">2.4.3: Reasignación de cortes</h3>
<p>En las listas, los sectores se pueden reasignar y eliminar.</p>
<pre><code class="language-python"># Reasginación
a = [0,1,2,3,4,5,6,7,8]
a[2:4] = [10,11,12]       # [0,1,10,11,12,4,5,6,7,8]
</code></pre>
<p><strong>Nota: No es necesario que el segmento reasignado tenga la misma longitud.</strong></p>
<pre><code class="language-python"># Remoción
a = [0,1,2,3,4,5,6,7,8]
del a[2:4]                # [0,1,4,5,6,7,8]
</code></pre>
<h3 id="244-secuencia-de-reducciones">2.4.4: Secuencia de reducciones</h3>
<p>Existen algunas funciones comunes para reducir una secuencia a un solo valor.</p>
<pre><code class="language-python">&gt;&gt;&gt; s = [1, 2, 3, 4]
&gt;&gt;&gt; sum(s)
10
&gt;&gt;&gt; min(s)
1
&gt;&gt;&gt; max(s)
4
&gt;&gt;&gt; t = ['Hello', 'World']
&gt;&gt;&gt; max(t)
'World'
&gt;&gt;&gt;
</code></pre>
<h3 id="245-iteracion-sobre-una-secuencia">2.4.5: Iteracion sobre una secuencia</h3>
<p>El bucle for itera sobre los elementos en una secuencia.</p>
<pre><code class="language-python">&gt;&gt;&gt; s = [1, 4, 9, 16]
&gt;&gt;&gt; for i in s:
...     print(i)
...
1
4
9
16
&gt;&gt;&gt;
</code></pre>
<p>En cada iteración del ciclo, obtienes un nuevo elemento con el que trabajar. Este nuevo valor se coloca en la variable de iteración. En este ejemplo, la variable de iteración es <code>x</code>:</p>
<pre><code class="language-python">for x in s:         # `x` es una variable de iteración
    ...declaraciones
</code></pre>
<p>En cada iteración, el valor anterior de la variable de iteración se sobrescribe (si lo hubiera). Una vez finalizado el ciclo, la variable retiene el último valor.</p>
<h3 id="246-la-declaracion-break">2.4.6: La declaración break</h3>
<p>Puede usar la <code>break</code>declaración para salir de un ciclo antes de tiempo.</p>
<pre><code class="language-python">for name in namelist:
    if name == 'Jake':
        break
    ...
    ...
declaraciones
</code></pre>
<p>Cuando la <code>break</code> instrucción se ejecuta, sale del ciclo y pasa al siguiente <code>statements</code>. La declaración <code>break</code>solo se aplica al bucle más interno. Si este bucle está dentro de otro bucle, no romperá el bucle exterior.</p>
<h3 id="247-la-declaracion-continue">2.4.7: La declaración continue</h3>
<p>Para omitir un elemento y pasar al siguiente, use la <code>continue</code>declaración.</p>
<pre><code class="language-python">for line in lines:
    if line == '\n':    # Skip blank lines
        continue
    # More statements
    ...
</code></pre>
<p>Esto es útil cuando el elemento actual no es de interés o debe ignorarse en el procesamiento.</p>
<h3 id="248-ciclando-sobre-enteros">2.4.8: Ciclando sobre enteros</h3>
<p>Si necesita contar, use <code>range()</code>.</p>
<pre><code class="language-python">for i in range(100):
    # i = 0,1,...,99
</code></pre>
<p>La sintaxis es <code>range([start,] end [,step])</code></p>
<pre><code class="language-python">for i in range(100):
    # i = 0,1,...,99 for j in range(10,20):
    # j = 10,11,..., 19 for k in range(10,50,2):
    # k = 10,12,...,48     # Note como cuenta en pasos de 2, no 1.
</code></pre>
<ul>
<li>El valor final nunca se incluye. Refleja el comportamiento de los cortes.</li>
<li><code>start</code> es opcional. Por defecto <code>0</code>.</li>
<li><code>step</code> es opcional. Por defecto <code>1</code>.</li>
<li><code>range()</code> calcula los valores según sea necesario. En realidad, no almacena una gran variedad de números.</li>
</ul>
<h3 id="249-la-funcion-enumerate">2.4.9: La función <code>enumerate()</code></h3>
<p>La <code>enumerate</code> función agrega un valor de contador adicional a la iteración.</p>
<pre><code class="language-python">names = ['Elwood', 'Jake', 'Curtis']
for i, name in enumerate(names):
    # Cicla con i = 0, name = 'Elwood'
    # i = 1, name = 'Jake'
    # i = 2, name = 'Curtis'
</code></pre>
<p>La forma general es <code>enumerate(sequence [, start = 0])</code>. <code>start</code> es opcional. Un buen ejemplo de uso <code>enumerate()</code> es el seguimiento de los números de línea mientras se lee un archivo:</p>
<pre><code class="language-python">with open(filename) as f:
    for lineno, line in enumerate(f, start=1):
        ...
</code></pre>
<p>Al final, <code>enumerate</code> es solo un buen atajo para:</p>
<pre><code class="language-python">i = 0
for x in s:
    statements
    i += 1
</code></pre>
<p>Usar <code>enumerate</code> es escribir menos y se ejecuta un poco más rápido.</p>
<h3 id="2410-for-y-tuplas">2.4.10: <code>for</code> y tuplas</h3>
<p>Puede iterar con múltiples variables de iteración.</p>
<pre><code class="language-python">points = [
  (1, 4),(10, 40),(23, 14),(5, 6),(7, 8)
]
for x, y in points:
    # Cicla con x = 1, y = 4
    # x = 10, y = 40
    # x = 23, y = 14
    # ...
</code></pre>
<p>Cuando se utilizan varias variables, cada tupla se <em>descompone</em> en un conjunto de variables de iteración. El número de variables debe coincidir con el número de elementos de cada tupla.</p>
<h3 id="2411-la-funcion-zip">2.4.11: La función <code>zip()</code></h3>
<p>La <code>zip</code>función toma múltiples secuencias y crea un iterador que las combina.</p>
<pre><code class="language-python">columns = ['name', 'shares', 'price']
values = ['GOOG', 100, 490.1 ]
pairs = zip(columns, values)
# ('name','GOOG'), ('shares',100), ('price',490.1)
</code></pre>
<p>Para obtener el resultado, debes iterar. Puede utilizar varias variables para descomprimir las tuplas como se mostró anteriormente.</p>
<pre><code class="language-python">for column, value in pairs:
    ...
</code></pre>
<p>Un uso común de <code>zip</code>es crear pares clave / valor para construir diccionarios.</p>
<pre><code class="language-python">d = dict(zip(columns, values))
</code></pre>
<h3 id="2412-ejercicios">2.4.12: Ejercicios</h3>
<h4 id="ejercicio-213-contar">Ejercicio 2.13: Contar</h4>
<p>Pruebe algunos ejemplos básicos de conteo:</p>
<pre><code class="language-python">&gt;&gt;&gt; for n in range(10):            # Cuenta 0 ... 9
        print(n, end=' ')

0 1 2 3 4 5 6 7 8 9
&gt;&gt;&gt; for n in range(10,0,-1):       # Cuenta 10 ... 1
        print(n, end=' ')

10 9 8 7 6 5 4 3 2 1
&gt;&gt;&gt; for n in range(0,10,2):        # Cuenta 0, 2, ... 8
        print(n, end=' ')

0 2 4 6 8
&gt;&gt;&gt;
</code></pre>
<h4 id="ejercicio-214-mas-operaciones-sobre-secuencias">Ejercicio 2.14: Mas operaciones sobre secuencias</h4>
<p>Experimente interactivamente con algunas de las operaciones de reducción de secuencia.</p>
<pre><code class="language-python">&gt;&gt;&gt; data = [4, 9, 1, 25, 16, 100, 49]
&gt;&gt;&gt; min(data)
1
&gt;&gt;&gt; max(data)
100
&gt;&gt;&gt; sum(data)
204
&gt;&gt;&gt;
</code></pre>
<p>Intente recorrer los datos.</p>
<pre><code>&gt;&gt;&gt; for x in data:
        print(x)

4
9
...
&gt;&gt;&gt; for n, x in enumerate(data):
        print(n, x)

0 4
1 9
2 1
...
&gt;&gt;
</code></pre>
<p>A veces, los principiantes usan la <code>for</code> instrucción, <code>len()</code> y <code>range()</code> en algún tipo de fragmento de código horrible que parece surgido de las profundidades de un programa C oxidado.</p>
<pre><code class="language-python">&gt;&gt;&gt; for n in range(len(data)):
        print(data[n])

4
9
1
...
&gt;&gt;&gt;
</code></pre>
<p>¡No hagas eso! Leerlo no solo hace sangrar los ojos de todos, es ineficiente con la memoria y funciona mucho más lento. Simplemente use un <code>for</code> bucle normal si desea iterar sobre los datos. Úselo <code>enumerate()</code> si necesita el índice por alguna razón.</p>
<h4 id="ejercicio-215-un-ejemplo-practico-de-enumerate">Ejercicio 2.15: Un ejemplo práctico de enumerate()</h4>
<p>Recuerde que el archivo <code>Data/missing.csv</code> contiene datos para una cartera de acciones, pero tiene algunas filas con datos faltantes. Usando <code>enumerate()</code>, modifique su <code>pcost.py</code> programa para que imprima un número de línea con el mensaje de advertencia cuando encuentre una entrada incorrecta.</p>
<pre><code class="language-python">&gt;&gt;&gt; cost = portfolio_cost('Data/missing.csv')
Row 4: Couldn't convert: ['MSFT', '', '51.23'] Row 7: Couldn't convert: ['IBM', '', '70.44']
&gt;&gt;&gt;
</code></pre>
<p>Para hacer esto, necesitará cambiar algunas partes de su código.</p>
<pre><code class="language-python">...
for rowno, row in enumerate(rows, start=1):
    try:
        ...
    except ValueError:
        print(f'Fila {rowno}: Mala fila: {row}')
</code></pre>
<h4 id="ejercicio-216-usando-la-funcion-zip">Ejercicio 2.16: Usando la función <code>zip()</code></h4>
<p>En el archivo <code>Data/portfolio.csv</code>, la primera línea contiene encabezados de columna. En todo el código anterior, los hemos estado descartando.</p>
<pre><code class="language-python">&gt;&gt;&gt; f = open('Data/portfolio.csv')
&gt;&gt;&gt; rows = csv.reader(f)
&gt;&gt;&gt; headers = next(rows)
&gt;&gt;&gt; headers
['name', 'shares', 'price']
&gt;&gt;&gt;
</code></pre>
<p>Sin embargo, ¿qué pasaría si pudieras usar los encabezados para algo útil? Aquí es donde la <code>zip()</code>función entra en escena. Primero intente esto para emparejar los encabezados del archivo con una fila de datos:</p>
<pre><code class="language-python">&gt;&gt;&gt; row = next(rows)
&gt;&gt;&gt; row
['AA', '100', '32.20']
&gt;&gt;&gt; list(zip(headers, row))
[ ('name', 'AA'), ('shares', '100'), ('price', '32.20') ]
&gt;&gt;&gt;
</code></pre>
<p>Observe cómo se <code>zip()</code> emparejaron los encabezados de columna con los valores de columna. Hemos utilizado <code>list()</code> aquí para convertir el resultado en una lista para que pueda verlo. Normalmente, <code>zip()</code> crea un iterador que debe consumir un bucle for.</p>
<p>Este emparejamiento es un paso intermedio para crear un diccionario. Ahora prueba esto:</p>
<pre><code class="language-python">&gt;&gt;&gt; record = dict(zip(headers, row))
&gt;&gt;&gt; record
{'price': '32.20', 'name': 'AA', 'shares': '100'}
&gt;&gt;&gt;
</code></pre>
<p>Esta transformación es uno de los trucos más útiles que debe conocer al procesar muchos archivos de datos. Por ejemplo, suponga que desea que el <code>pcost.py</code> programa funcione con varios archivos de entrada, pero sin tener en cuenta el  número de columna real donde aparecen el nombre, las acciones y el  precio.</p>
<p>Modifique la <code>portfolio_cost()</code> función <code>pcost.py</code> para que se vea así:</p>
<pre><code class="language-python"># pcost.py
def portfolio_cost(filename):
    ...
        for rowno, row in enumerate(rows, start=1):
            record = dict(zip(headers, row))
            try:
                nshares = int(record['shares'])
                price = float(record['price'])
                total_cost += nshares * price
            except ValueError:  # Esto atrapa errores de conversión a int() y float()
                print(f'Fila {rowno}: Mala fila: {row}')
        ...
</code></pre>
<p>Ahora, pruebe su función en un archivo de datos completamente diferente <code>Data/portfoliodate.csv</code>que se ve así:</p>
<pre><code class="language-csv">name,date,time,shares,price
&quot;AA&quot;,&quot;6/11/2007&quot;,&quot;9:50am&quot;,100,32.20
&quot;IBM&quot;,&quot;5/13/2007&quot;,&quot;4:20pm&quot;,50,91.10
&quot;CAT&quot;,&quot;9/23/2006&quot;,&quot;1:30pm&quot;,150,83.44
&quot;MSFT&quot;,&quot;5/17/2007&quot;,&quot;10:30am&quot;,200,51.23
&quot;GE&quot;,&quot;2/1/2006&quot;,&quot;10:45am&quot;,95,40.37
&quot;MSFT&quot;,&quot;10/31/2006&quot;,&quot;12:05pm&quot;,50,65.10
&quot;IBM&quot;,&quot;7/9/2006&quot;,&quot;3:15pm&quot;,100,70.44
</code></pre>
<pre><code class="language-python">&gt;&gt;&gt; portfolio_cost('Data/portfoliodate.csv')
44671.15
&gt;&gt;&gt;
</code></pre>
<p>Si lo hizo bien, verá que su programa aún funciona a pesar de que el  archivo de datos tiene un formato de columna completamente diferente al  anterior. ¡Eso es genial!</p>
<p>El cambio realizado aquí es sutil, pero significativo. En lugar de <code>portfolio_cost()</code>estar codificado para leer un solo formato de archivo fijo, la nueva versión  lee cualquier archivo CSV y selecciona los valores de interés. Siempre que el archivo tenga las columnas requeridas, el código funcionará.</p>
<p>Modifique el <code>report.py</code>programa que escribió en la Sección 2.3 para que utilice la misma técnica para seleccionar encabezados de columna.</p>
<p>Intente ejecutar el <code>report.py</code>programa en el <code>Data/portfoliodate.csv</code>archivo y vea que produce la misma respuesta que antes.</p>
<h4 id="ejercicio-217-invirtiendo-un-diccionario">Ejercicio 2.17: Invirtiendo un diccionario</h4>
<p>Un diccionario asigna claves a valores. Por ejemplo, un diccionario de precios de acciones.</p>
<pre><code class="language-python">&gt;&gt;&gt; prices = {
        'GOOG': 490.1,
        'AA': 23.45,
        'IBM': 91.1,
        'MSFT': 34.23
    }
&gt;&gt;&gt;
</code></pre>
<p>Si usa el método <code>items()</code>, puede obtener pares  <code>(key,value)</code>:</p>
<pre><code class="language-python">&gt;&gt;&gt; prices.items()
dict_items([('GOOG', 490.1), ('AA', 23.45), ('IBM', 91.1), ('MSFT', 34.23)])
&gt;&gt;&gt;
</code></pre>
<p>Sin embargo, ¿qué pasaría si quisiera obtener una lista de pares  <code>(value, key)</code>? <em>Sugerencia: use <code>zip()</code>.</em></p>
<pre><code class="language-python">&gt;&gt;&gt; pricelist = list(zip(prices.values(),prices.keys()))
&gt;&gt;&gt; pricelist
[(490.1, 'GOOG'), (23.45, 'AA'), (91.1, 'IBM'), (34.23, 'MSFT')]
&gt;&gt;&gt;
</code></pre>
<p>¿Por qué harías esto? Por un lado, le permite realizar ciertos tipos de procesamiento de datos en los datos del diccionario.</p>
<pre><code class="language-python">&gt;&gt;&gt; min(pricelist)
(23.45, 'AA')
&gt;&gt;&gt; max(pricelist)
(490.1, 'GOOG')
&gt;&gt;&gt; sorted(pricelist)
[(23.45, 'AA'), (34.23, 'MSFT'), (91.1, 'IBM'), (490.1, 'GOOG')]
&gt;&gt;&gt;
</code></pre>
<p>Esto también ilustra una característica importante de las tuplas. Cuando se usan en comparaciones, las tuplas se comparan elemento por elemento comenzando con el primer elemento. Similar a cómo se comparan las cadenas carácter por carácter.</p>
<p><code>zip()</code> se utiliza a menudo en situaciones como esta en las que necesita emparejar datos de diferentes lugares. Por ejemplo, emparejar los nombres de las columnas con los valores de las  columnas para crear un diccionario de valores con nombre.</p>
<p>Tenga en cuenta que <code>zip()</code> no se limita a pares. Por ejemplo, puede usarlo con cualquier número de listas de entrada:</p>
<pre><code class="language-python">&gt;&gt;&gt; a = [1, 2, 3, 4]
&gt;&gt;&gt; b = ['w', 'x', 'y', 'z']
&gt;&gt;&gt; c = [0.2, 0.4, 0.6, 0.8]
&gt;&gt;&gt; list(zip(a, b, c))
[(1, 'w', 0.2), (2, 'x', 0.4), (3, 'y', 0.6), (4, 'z', 0.8))]
&gt;&gt;&gt;
</code></pre>
<p>Además, tenga en cuenta que  <code>zip()</code> se detiene una vez que se agota la secuencia de entrada más corta.</p>
<pre><code class="language-python">&gt;&gt;&gt; a = [1, 2, 3, 4, 5, 6]
&gt;&gt;&gt; b = ['x', 'y', 'z']
&gt;&gt;&gt; list(zip(a,b))
[(1, 'x'), (2, 'y'), (3, 'z')]
&gt;&gt;&gt;
</code></pre>
<h2 id="25-el-modulo-collections">2.5 El modulo <code>collections</code></h2>
<p>El <code>collections</code> módulo proporciona una serie de objetos útiles para el manejo de datos. Esta parte presenta brevemente algunas de estas características.</p>
<h3 id="251-ejemplo-contando-cosas">2.5.1: Ejemplo: contando cosas</h3>
<p>Digamos que desea tabular el total de acciones de cada acción.</p>
<pre><code class="language-python">portfolio = [
    ('GOOG', 100, 490.1),
    ('IBM', 50, 91.1),
    ('CAT', 150, 83.44),
    ('IBM', 100, 45.23),
    ('GOOG', 75, 572.45),
    ('AA', 50, 23.15)
]
</code></pre>
<p>Hay dos <code>IBM</code> entradas y dos <code>GOOG</code> entradas en esta lista. Las acciones deben combinarse de alguna manera.</p>
<h3 id="252-contadores">2.5.2: Contadores</h3>
<p>Solución: utilice un <code>Counter</code>.</p>
<pre><code class="language-python">from collections import Counter
total_shares = Counter()
for name, shares, price in portfolio:
    total_shares[name] += shares

total_shares['IBM']     # 150 
</code></pre>
<h3 id="253-ejemplo-asignaciones-uno-muchos">2.5.3: Ejemplo: asignaciones uno-muchos</h3>
<p>Problema: desea asignar una clave a varios valores.</p>
<pre><code class="language-python">portfolio = [
    ('GOOG', 100, 490.1),
    ('IBM', 50, 91.1),
    ('CAT', 150, 83.44),
    ('IBM', 100, 45.23),
    ('GOOG', 75, 572.45),
    ('AA', 50, 23.15)
]
</code></pre>
<p>Como en el ejemplo anterior, la clave <code>IBM</code>debería tener dos tuplas diferentes en su lugar.</p>
<p>Solución: utilice un <code>defaultdict</code>.</p>
<pre><code class="language-python">from collections import defaultdict
holdings = defaultdict(list)
for name, shares, price in portfolio:
    holdings[name].append((shares, price))
holdings['IBM'] # [ (50, 91.1), (100, 45.23) ] 
</code></pre>
<p>El <code>defaultdict</code>asegura que cada vez que acceda a una clave obtenga un valor predeterminado.</p>
<h3 id="254-ejemplo-un-historial">2.5.4: Ejemplo: un historial</h3>
<p>Problema: queremos un historial de las últimas N cosas. Solución: utilice un <code>deque</code>.</p>
<pre><code class="language-python">from collections import deque

history = deque(maxlen=N)
with open(filename) as f:
    for line in f:
        history.append(line)
        ...
</code></pre>
<h3 id="255-ejercicios">2.5.5: Ejercicios</h3>
<p>El <code>collections</code>módulo puede ser uno de los módulos de biblioteca más útiles para tratar tipos de problemas de manejo de datos con fines especiales, como la  tabulación y la indexación.</p>
<p>En este ejercicio, veremos algunos ejemplos simples. Comience ejecutando su <code>report.py</code> programa para que tenga la cartera de acciones cargada en el modo interactivo.</p>
<pre><code class="language-bash">bash % python3 -i report.py
</code></pre>
<h4 id="218-tabulacion-con-contadores">2.18: Tabulación con contadores</h4>
<p>Suponga que desea tabular el número total de acciones de cada acción. Esto es fácil de usar <code>Counter</code>objetos. Intentalo:</p>
<pre><code class="language-python">&gt;&gt;&gt; portfolio = read_portfolio('Data/portfolio.csv')
&gt;&gt;&gt; from collections import Counter
&gt;&gt;&gt; holdings = Counter()
&gt;&gt;&gt; for s in portfolio:
        holdings[s['name']] += s['shares']

&gt;&gt;&gt; holdings
Counter({'MSFT': 250, 'IBM': 150, 'CAT': 150, 'AA': 100, 'GE': 95})
&gt;&gt;&gt;
</code></pre>
<p>Observe cuidadosamente cómo las múltiples entradas para <code>MSFT</code>y <code>IBM</code>en <code>portfolio</code>se combinan en una sola entrada aquí.</p>
<p>Puede usar un contador como un diccionario para recuperar valores individuales:</p>
<pre><code class="language-python">&gt;&gt;&gt; holdings['IBM']
150
&gt;&gt;&gt; holdings['MSFT']
250
&gt;&gt;&gt;
</code></pre>
<p>Si desea clasificar los valores, haga esto:</p>
<pre><code class="language-python">&gt;&gt;&gt; # Get three most held stocks &gt;&gt;&gt; holdings.most_common(3)
[('MSFT', 250), ('IBM', 150), ('CAT', 150)]
&gt;&gt;&gt;
</code></pre>
<p>Tomemos otra cartera de acciones y creemos un nuevo contador:</p>
<pre><code class="language-python">&gt;&gt;&gt; portfolio2 = read_portfolio('Data/portfolio2.csv')
&gt;&gt;&gt; holdings2 = Counter()
&gt;&gt;&gt; for s in portfolio2:
          holdings2[s['name']] += s['shares']

&gt;&gt;&gt; holdings2
Counter({'HPQ': 250, 'GE': 125, 'AA': 50, 'MSFT': 25})
&gt;&gt;&gt;
</code></pre>
<p>Finalmente, combinemos todas las existencias haciendo una operación simple:</p>
<pre><code class="language-python">&gt;&gt;&gt; holdings
Counter({'MSFT': 250, 'IBM': 150, 'CAT': 150, 'AA': 100, 'GE': 95})
&gt;&gt;&gt; holdings2
Counter({'HPQ': 250, 'GE': 125, 'AA': 50, 'MSFT': 25})
&gt;&gt;&gt; combined = holdings + holdings2
&gt;&gt;&gt; combined
Counter({'MSFT': 275, 'HPQ': 250, 'GE': 220, 'AA': 150, 'IBM': 150, 'CAT': 150})
&gt;&gt;&gt;
</code></pre>
<p>Esto es solo una pequeña muestra de lo que ofrecen los contadores. Sin embargo, si alguna vez necesita tabular valores, debería considerar usar uno.</p>
<h3 id="256-comentario-el-modulo-collections">2.5.6: Comentario: el modulo collections</h3>
<p>El módulo  <code>collections</code> es uno de los módulos de biblioteca más útiles de todo Python. De hecho, podríamos hacer un tutorial extenso sobre eso. Sin embargo, hacerlo ahora también sería una distracción. Por ahora, ponga <code>collections</code>su lista de lecturas a la hora de dormir para más tarde.</p>
<h2 id="26-list-comprehensions">2.6 List comprehensions</h2>
<h3 id="261-creando-nuevas-listas">2.6.1: Creando nuevas listas</h3>
<h3 id="262-filtrar">2.6.2: Filtrar</h3>
<h3 id="263-casos-de-uso">2.6.3: Casos de uso</h3>
<h3 id="264-sintaxis-general">2.6.4: Sintaxis general</h3>
<h4 id="265-digresion-historica">2.6.5: Digresión histórica</h4>
<h4 id="266-ejercicios">2.6.6: Ejercicios</h4>
<h4 id="219-list-comprehensions">2.19: List comprehensions</h4>
<h4 id="220-reducciones-de-secuencia">2.20: Reducciones de secuencia</h4>
<h4 id="221-consulta-de-datos">2.21: Consulta de datos</h4>
<h4 id="222-extraccion-de-datos">2.22: Extracción de datos</h4>
<h4 id="223-extraccion-de-datos-desde-archivos-csv">2.23: Extracción de datos desde archivos CSV</h4>
<h4 id="comentario">Comentario</h4>
<h2 id="27-el-modelo-objeto">2.7 El modelo Objeto</h2>
<h3 id="271-asignacion">2.7.1: Asignacion</h3>
<h3 id="272-ejemplo-de-asignacion">2.7.2: Ejemplo de asignacion</h3>
<h3 id="273-reasignacion-de-valores">2.7.3: Reasignacion de valores</h3>
<h3 id="274-algunos-peligros">2.7.4: Algunos peligros</h3>
<h3 id="275-identidad-y-referencias">2.7.5: Identidad y referencias</h3>
<h3 id="276-copias-superficiales">2.7.6: Copias superficiales</h3>
<h4 id="229-copias-profundas">2.29: Copias profundas</h4>
<h4 id="230-nombres-valores-tipos">2.30: Nombres, valores, tipos</h4>
<h4 id="231-verificacion-de-tipo">2.31: Verificación de tipo</h4>
<h4 id="232-todo-es-un-objeto">2.32: Todo es un objeto</h4>
<h4 id="233-ejercicios">2.33: Ejercicios</h4>
<h4 id="ejercicio-224-data-de-primera-clase">Ejercicio 2.24: Data de primera-clase</h4>
<h4 id="ejercicio-225-creando-diccionarios">Ejercicio 2.25: Creando diccionarios</h4>
<h4 id="ejercicio-226-el-horizonte">Ejercicio 2.26: El horizonte</h4>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../3/" class="btn btn-neutral float-right" title="3 Organización de un Programa">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../1/" class="btn btn-neutral" title="1 Intro a Python"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../1/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../3/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
