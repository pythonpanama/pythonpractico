<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  
  <link rel="shortcut icon" href="../img/favicon.ico">
  <title>4 Clases y Objetos - Python Práctico</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700" />

  <link rel="stylesheet" href="../css/theme.css" />
  <link rel="stylesheet" href="../css/theme_extra.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css" />
  
  <script>
    // Current page data
    var mkdocs_page_name = "4 Clases y Objetos";
    var mkdocs_page_input_path = "4.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../js/jquery-2.1.1.min.js" defer></script>
  <script src="../js/modernizr-2.8.3.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/python.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/shell.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/bash.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> Python Práctico</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="..">Sobre el curso</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../temario/">Temario</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../faq/">Preguntas</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../0/">0 Empiece aqui</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../1/">1 Intro a Python</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../2/">2 Trabajando con Data</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../3/">3 Organización de un Programa</a>
                    </li>
                </ul>
                <ul class="current">
                    <li class="toctree-l1 current"><a class="reference internal current" href="./">4 Clases y Objetos</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#41-clases">4.1 Clases</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#411-programacion-orientada-a-objetos-oo">4.1.1 Programación orientada a objetos (OO)</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#412-instancias">4.1.2 Instancias</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#413-datos-de-instancia">4.1.3 Datos de instancia</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#414-metodos-de-instancia">4.1.4 Métodos de instancia</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#415-alcance-de-la-clase">4.1.5 Alcance de la clase</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#416-ejercicios">4.1.6 Ejercicios</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#417-ejercicio-41-objetos-como-estructuras-de-datos">4.1.7 Ejercicio 4.1: Objetos como estructuras de datos</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#ejercicio-42-adicion-de-algunos-metodos">Ejercicio 4.2: Adición de algunos métodos</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#ejercicio-43-creando-una-lista-de-instancias">Ejercicio 4.3: Creando una lista de instancias</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#ejercicio-44-usar-tu-clase">Ejercicio 4.4: Usar tu clase</a>
    </li>
        </ul>
    </li>
        </ul>
    </li>
    </ul>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../5/">5 Entrañas del Objeto</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../6/">6 Generadores</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../7/">7 Temas avanzados</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../8/">8 Prueba y Depuración</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../9/">9 Paquetes</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../licencia/">Licencia</a>
                    </li>
                </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">Python Práctico</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
    
    <li>4 Clases y Objetos</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="4-clases-y-objetos">4. Clases y Objetos</h1>
<p>Introduciremos el concepto de clases y objetos. Aprenderemos sobre la 
declaración class que nos permite crear nuevos objetos. También 
introcimos el concepto de inherencia, unaherramienta que es 
comunmente utilizada para construir programar extensibles. 
Finalmente, veremos otras características de clases como los métodos 
especiales, búsqueda dinamica de atributos, y la definición de nuevas 
excepciones.</p>
<h2 id="41-clases">4.1 Clases</h2>
<p>Esta sección presenta la declaración de clase y la idea de crear 
nuevos objetos.</p>
<h3 id="411-programacion-orientada-a-objetos-oo">4.1.1 Programación orientada a objetos (OO)</h3>
<p>Una técnica de programación en la que el código se organiza como una 
colección de objetos .</p>
<p>Un objeto consta de:</p>
<ul>
<li>Datos. Atributos</li>
<li>Comportamiento. Métodos que son funciones aplicadas al objeto.</li>
</ul>
<p>Ya ha estado utilizando OO durante este curso.</p>
<p>Por ejemplo, manipular una lista.</p>
<pre><code class="language-python">&gt;&gt;&gt; nums = [1, 2, 3]
&gt;&gt;&gt; nums.append(4)      # Metodo
&gt;&gt;&gt; nums.insert(1,10)   # Metodo 
&gt;&gt;&gt; nums
[1, 10, 2, 3, 4]        # Data 
&gt;&gt;&gt;
</code></pre>
<p><code>nums</code> es una instancia de una lista.</p>
<p>Los métodos (<code>append()</code> e <code>insert()</code>) se adjuntan a la instancia 
(<code>nums</code>).</p>
<p>La declaración <code>class</code></p>
<p>Utilice la declaración <code>class</code> para definir un nuevo objeto.</p>
<pre><code class="language-python">class Player:
    def __init__(self, x, y):
        self.x = x
        self.y = y
        self.health = 100

    def move(self, dx, dy):
        self.x += dx
        self.y += dy

    def damage(self, pts):
        self.health -= pts
</code></pre>
<p>En pocas palabras, una clase es un conjunto de funciones que realizan 
varias operaciones en las denominadas <em>instancias</em>.</p>
<h3 id="412-instancias">4.1.2 Instancias</h3>
<p>Las instancias son los objetos reales que manipula en su programa.</p>
<p>Se crean llamando a la clase como función.</p>
<pre><code class="language-python">&gt;&gt;&gt; a = Player(2, 3)
&gt;&gt;&gt; b = Player(10, 20)
&gt;&gt;&gt;
</code></pre>
<p><code>a</code> y <code>b</code> son instancias de <code>Player</code>.</p>
<p><em>Importante: La declaración de clase es solo la definición 
(no hace nada por sí misma). Similar a la definición de una función.</em></p>
<h3 id="413-datos-de-instancia">4.1.3 Datos de instancia</h3>
<p>Cada instancia tiene sus propios datos locales.</p>
<pre><code class="language-python">&gt;&gt;&gt; a.x
2
&gt;&gt;&gt; b.x
10
</code></pre>
<p>Estos datos son inicializados por <code>__init__()</code>.</p>
<pre><code class="language-python">class Player:
    def __init__(self, x, y):
        # Cualquier valor guardado en `self` es data de la instancia         
        self.x = x
        self.y = y
        self.health = 100
</code></pre>
<p>No hay restricciones sobre el número total o el tipo de atributos 
almacenados.</p>
<h3 id="414-metodos-de-instancia">4.1.4 Métodos de instancia</h3>
<p>Los métodos de instancia son funciones aplicadas a instancias de un 
objeto.</p>
<pre><code class="language-python">class Player:
    ...
    # `move` es un metodo     
    def move(self, dx, dy):
        self.x += dx
        self.y += dy
</code></pre>
<p>El objeto en sí siempre se pasa como primer argumento.</p>
<pre><code class="language-python">&gt;&gt;&gt; a.move(1, 2)

# empareja `a` a `self` 
# empareja `1` a `dx` 
# empareja `2` a `dy` 
def move(self, dx, dy):
</code></pre>
<p>Por convención, se llama la instancia <code>self</code>. Sin embargo, el nombre 
real utilizado no es importante. El objeto siempre se pasa como 
primer argumento. Es simplemente estilo de programación Python para 
llamar a este argumento <code>self</code>.</p>
<h3 id="415-alcance-de-la-clase">4.1.5 Alcance de la clase</h3>
<p>Las clases no definen un ámbito / espacio de nombres.</p>
<pre><code class="language-python">class Player:
    ...
    def move(self, dx, dy):
        self.x += dx
        self.y += dy

    def left(self, amt):
        move(-amt, 0)       # NO. Llama función global `move`         
        self.move(-amt, 0)  # SI. Llama metodo `move` de arriba. 
</code></pre>
<p>Si desea operar en una instancia, siempre se refiere a ella 
explícitamente (por ejemplo, <code>self</code>).</p>
<h3 id="416-ejercicios">4.1.6 Ejercicios</h3>
<p>A partir de este conjunto de ejercicios, comenzamos a realizar una 
serie de cambios en el código existente de las secciones anteriores. 
Es fundamental que tenga una versión funcional del ejercicio 3.18 
para comenzar. Si no la tiene, trabaje con el código de solución que 
se encuentra en el directorio <code>Solutions/3_18</code>. Está bien copiarlo.</p>
<h4 id="417-ejercicio-41-objetos-como-estructuras-de-datos">4.1.7 Ejercicio 4.1: Objetos como estructuras de datos</h4>
<p>En la sección 2 y 3, trabajamos con datos representados como tuplas y 
diccionarios. Por ejemplo, una tenencia de acciones podría 
representarse como una tupla como esta:</p>
<pre><code class="language-python">s = ('GOOG',100,490.10)
</code></pre>
<p>o como un diccionario como este:</p>
<pre><code class="language-python">s = { 'name'   : 'GOOG',
      'shares' : 100,
      'price'  : 490.10
}
</code></pre>
<p>Incluso puede escribir funciones para manipular dichos datos. </p>
<p>Por ejemplo:</p>
<pre><code class="language-python">def cost(s):
    return s['shares'] * s['price']
</code></pre>
<p>Sin embargo, a medida que su programa crece, es posible que desee 
crear un mejor sentido de organización. Por lo tanto, otro enfoque 
para representar datos sería definir una clase. Cree un archivo 
llamado <code>stock.py</code> y defina una clase <code>Stock</code> que represente una sola 
tenencia de acciones. Las instancias de <code>Stock</code> deben tener los 
atributos de <code>name</code>, <code>shares</code> y <code>price</code>. Por ejemplo:</p>
<pre><code class="language-python">&gt;&gt;&gt; import stock
&gt;&gt;&gt; a = stock.Stock('GOOG',100,490.10)
&gt;&gt;&gt; a.name
'GOOG'
&gt;&gt;&gt; a.shares
100
&gt;&gt;&gt; a.price
490.1
&gt;&gt;&gt;
</code></pre>
<p>Cree algunos objetos <code>Stock</code> más y manipúlelos. Por ejemplo:</p>
<pre><code class="language-python">&gt;&gt;&gt; b = stock.Stock('AAPL', 50, 122.34)
&gt;&gt;&gt; c = stock.Stock('IBM', 75, 91.75)
&gt;&gt;&gt; b.shares * b.price
6117.0
&gt;&gt;&gt; c.shares * c.price
6881.25
&gt;&gt;&gt; stocks = [a, b, c]
&gt;&gt;&gt; stocks
[&lt;stock.Stock object at 0x37d0b0&gt;, &lt;stock.Stock object at 0x37d110&gt;, 
&lt;stock.Stock object at 0x37d050&gt;]
&gt;&gt;&gt; for s in stocks:
     print(f'{s.name:&gt;10s} {s.shares:&gt;10d} {s.price:&gt;10.2f}')

... mire la salida ...
&gt;&gt;&gt;
</code></pre>
<p>Una cosa a enfatizar aquí es que la clase <code>Stock</code> actúa como una 
fábrica para crear instancias de objetos. Básicamente, la llamas como 
una función y crea un nuevo objeto para ti. Además, debe enfatizarse 
que cada objeto es distinto: cada uno tiene sus propios datos que 
están separados de otros objetos que se han creado.</p>
<p>Un objeto definido por una clase es algo similar a un diccionario, 
solo que con una sintaxis algo diferente. Por ejemplo, en lugar de 
escribir <code>s['name']</code> o <code>s['price']</code>, ahora escribe <code>s.name</code> y 
<code>s.price</code>.</p>
<h4 id="ejercicio-42-adicion-de-algunos-metodos">Ejercicio 4.2: Adición de algunos métodos</h4>
<p>Con las clases, puede adjuntar funciones a sus objetos. Estos se 
conocen como métodos y son funciones que operan sobre los datos 
almacenados dentro de un objeto. Agregue un método <code>cost()</code> y 
<code>sell()</code> a su objeto <code>Stock</code>. Deberían funcionar así:</p>
<pre><code class="language-python">&gt;&gt;&gt; import stock
&gt;&gt;&gt; s = stock.Stock('GOOG', 100, 490.10)
&gt;&gt;&gt; s.cost()
49010.0
&gt;&gt;&gt; s.shares
100
&gt;&gt;&gt; s.sell(25)
&gt;&gt;&gt; s.shares
75
&gt;&gt;&gt; s.cost()
36757.5
&gt;&gt;&gt;
</code></pre>
<h4 id="ejercicio-43-creando-una-lista-de-instancias">Ejercicio 4.3: Creando una lista de instancias</h4>
<p>Pruebe estos pasos para hacer una lista de instancias de <code>Stock</code> a 
partir de una lista de diccionarios. Luego calcule el costo total:</p>
<pre><code class="language-python">&gt;&gt;&gt; import fileparse
&gt;&gt;&gt; with open('Data/portfolio.csv') as lines:
...     portdicts = fileparse.parse_csv(lines, select=['name','shares','price'], types=[str,int,float])
...
&gt;&gt;&gt; portfolio = [ stock.Stock(d['name'], d['shares'], d['price']) for d in portdicts]
&gt;&gt;&gt; portfolio
[&lt;stock.Stock object at 0x10c9e2128&gt;, &lt;stock.Stock object at 0x10c9e2048&gt;, &lt;stock.Stock object at 0x10c9e2080&gt;,
 &lt;stock.Stock object at 0x10c9e25f8&gt;, &lt;stock.Stock object at 0x10c9e2630&gt;, &lt;stock.Stock object at 0x10ca6f748&gt;,
 &lt;stock.Stock object at 0x10ca6f7b8&gt;]
&gt;&gt;&gt; sum([s.cost() for s in portfolio])
44671.15
&gt;&gt;&gt;
</code></pre>
<h4 id="ejercicio-44-usar-tu-clase">Ejercicio 4.4: Usar tu clase</h4>
<p>Modifique la función <code>read_portfolio()</code> en el programa <code>report.py</code> 
para que lea un portafolio en una lista de instancias <code>Stock</code> como se 
muestra en el ejercicio 4.3. Una vez que haya hecho eso, modifique 
todo el código en <code>report.py</code> y <code>pcost.py</code> para que funcione con 
<code>Stock</code> casos en lugar de los diccionarios.</p>
<p>Sugerencia: no debería tener que realizar cambios importantes en el 
código. Principalmente, cambiará el acceso al diccionario, como 
<code>s['shares']</code> en <code>s.shares</code>.</p>
<p>Debería poder ejecutar sus funciones de la misma manera que antes:</p>
<pre><code class="language-python">&gt;&gt;&gt; import pcost
&gt;&gt;&gt; pcost.portfolio_cost('Data/portfolio.csv')
44671.15
&gt;&gt;&gt; import report
&gt;&gt;&gt; report.portfolio_report('Data/portfolio.csv', 'Data/prices.csv')
      Name     Shares      Price     Change
---------- ---------- ---------- ----------
        AA        100       9.22     -22.98
       IBM         50     106.28      15.18
       CAT        150      35.46     -47.98
      MSFT        200      20.89     -30.34
        GE         95      13.48     -26.89
      MSFT         50      20.89     -44.21
       IBM        100     106.28      35.84
&gt;&gt;&gt;
</code></pre>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../5/" class="btn btn-neutral float-right" title="5 Entrañas del Objeto">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../3/" class="btn btn-neutral" title="3 Organización de un Programa"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../3/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../5/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
